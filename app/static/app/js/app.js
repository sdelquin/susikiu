// Generated by CoffeeScript 1.10.0
var init_datepicker, init_video_like_btn, search, set_active_navbar, video_affinity;

$(function() {
  set_active_navbar();
  $("[data-toggle='tooltip']").tooltip();
  $("[data-toggle='popover']").popover();
  $("#video-like-btn").click(video_affinity);
  $("#video-dislike-btn").click(video_affinity);
  init_video_like_btn();
  $("#search-form").on("submit", search);
  return init_datepicker();
});

set_active_navbar = function() {
  $(".section-nav").each(function(i, obj) {
    var li;
    li = $(this);
    return li.removeClass("active");
  });
  return $("#" + active_section_nav).addClass("active");
};

init_video_like_btn = function() {
  if ((typeof already_liked !== "undefined" && already_liked !== null) && already_liked === "False") {
    return $("#video-dislike-btn").hide();
  } else {
    return $("#video-like-btn").hide();
  }
};

video_affinity = function(event) {
  var button_id, url;
  event.preventDefault();
  url = this.pathname;
  button_id = this.id;
  return $.get(url, function(data) {
    data = JSON.parse(data);
    $("#video_likes_count").text(data.count);
    if (button_id === "video-like-btn") {
      $("#video-like-btn").hide();
      $("#video-dislike-btn").fadeIn(500);
    } else {
      $("#video-dislike-btn").hide();
      $("#video-like-btn").fadeIn(500);
    }
    return $("#likes-heart ").attr("data-original-title", data.likes.join("<br/>"));
  });
};

search = function(event) {
  var data, url, url1;
  event.preventDefault();
  data = $("#search-input").val();
  url1 = $(this).attr("action");
  url = "" + url1 + data + "/";
  return window.location.href = url;
};

init_datepicker = function() {
  return $(".datepicker").datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: "1940:",
    dateFormat: "dd/mm/yy"
  });
};
